<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <script src="gesture-detector.js"></script>
    <script src="gesture-handler.js"></script>
</head>
<body style="margin: 0px; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
        renderer="logarithmicDepthBuffer: true;" vr-mode-ui="enabled: false" gesture-detector id="scene">

        <a-assets>
            <a-asset-item id="modelo" src="captain_america_bike.glb" timeout="10000"></a-asset-item>
            <a-asset-item id="modelo2" src="yamaha_yzf-r3_2017.glb" timeout="10000"></a-asset-item>
            <audio id="sound" src="moto capitan.mp3" preload="auto"></audio>
            <audio id="sound2" src="yamahar3.mp3" preload="auto"></audio>
        </a-assets>

        <a-marker id="america" type="barcode" value="5" raycaster="objects: .clickable" emitevents="true"
            cursor="fuse: false; rayOrigin: mouse;">
            <a-entity  gltf-model="#modelo" scale="2 2 1" class="clickable" gesture-handler soundhandler></a-entity>
        </a-marker>

        <a-marker id="moto_chida" type="barcode" value="8" raycaster="objects: .clickable" emitevents="true"
            cursor="fuse: false; rayOrigin: mouse;">
            <a-entity  gltf-model="#modelo2" scale="5 5 5" class="clickable" gesture-handler soundhandler></a-entity>
        </a-marker>

        <a-entity camera></a-entity>

        <a-entity id="capitan" sound="src: #sound" autoplay="false"></a-entity>
        <a-entity id="yama" sound2="src: #sound2" autoplay="false"></a-entity>
    </a-scene>

    <script>
        AFRAME.registerComponent('soundhandler', {
            tick: function () {
                var entity = document.querySelector('[capitan]');
                var entity2 = document.querySelector('[yama]')
                if (document.querySelector('america').object3D.visible == true)
                {
                    entity2.components.sound.pauseSound();
                    entity.components.sound.playSound();

                } else if (document.querySelector('moto_chida'.object3D.visible == true){
                    entity.components.sound.pauseSound();
                    entity2.components.sound.playSound();
                }
                else{
                     entity2.components.sound.pauseSound();
                     entity.components.sound.pauseSound();

                }
            }
        });
    </script>
</body>
</html>
